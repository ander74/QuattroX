#region COPYRIGHT
// ===============================================
//   Copyright 2024 - Quattro X 2.0 - A. Herrero    
// -----------------------------------------------
//  Vea el archivo Licencia.txt para más detalles 
// ===============================================
#endregion
using QuattroX.Data.Helpers;
using QuattroX.Data.Model;
using QuattroX.Data.Repositories;

namespace QuattroX.Services;


public class ConfigService {


    // ====================================================================================================
    #region Campos privados y constructor
    // ====================================================================================================

    private readonly DbRepository dbRepository;

    public ConfigService(DbRepository dbRepository) {
        this.dbRepository = dbRepository;

    }


    #endregion
    // ====================================================================================================


    // ====================================================================================================
    #region Propiedades
    // ====================================================================================================


    public OpcionesModel Opciones { get; private set; }


    #endregion
    // ====================================================================================================


    // ====================================================================================================
    #region Métodos públicos
    // ====================================================================================================


    public async Task InitAsync() {
        var options = await dbRepository.GetOpcionesAsync();
        options ??= new();
        Opciones = options.ToModel();
    }


    public async Task SaveAsync() {
        if (Opciones is null) return;
        var options = Opciones.ToEntity();
        await dbRepository.SaveOpcionesAsync(options);
    }


    #endregion
    // ====================================================================================================


    // ====================================================================================================
    #region Métodos privados
    // ====================================================================================================


    #endregion
    // ====================================================================================================


    // ====================================================================================================
    #region Comandos
    // ====================================================================================================


    #endregion
    // ====================================================================================================



}
